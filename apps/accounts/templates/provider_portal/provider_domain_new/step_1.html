{% extends "provider_portal/provider_domain_new/base.html" %}

{%  block previous_steps %}
<h3 class="border-none">Domain: </h3>
<p class="border-b-1">{{preview_data.0.domain}}</p>
{%  endblock previous_steps %}


{%  block current_step_pre %}
<h3>Step 2: Link Domain to a Carbon.txt file</h3>
<p>
You can either create a new carbon.txt file or point to the carbon.txt at an existing domain, using HTTP or DNS. More copy on the circumstances in which you might use each one.
</p>
{% if provider.primary_linked_domain %}
<div class="tabbedview my-5 py-5">
  <ul role="tablist" class="tablist flex flex-wrap text-sm font-medium text-center list-none w-full justify-items-stretch pl-0 m-0">
      <li class="pl-0 m-0 grow">
          <a href="#" role="tab" aria-selected="true" aria-controls="carbontxt-file-panel" id="carbontxt-file-tab" class="tab inline-block p-4 border rounded-tl-lg w-full active m-0 no-underline hover:underline">Create a new carbon.txt</a>
      </li>
      <li class="pl-0 m-0 grow">
          <a href="#" role="tab" aria-selected="false" aria-controls="carbontxt-dns-panel" id="carbontxt-dns-tab" class="tab inline-block p-4 border-y bg-neutral-200 hover:bg-neutral-100 w-full m-0 no-underline hover:underline">Use existing with DNS</a>
      </li>
      <li class="pl-0 m-0 grow">
          <a href="#" role="tab" aria-selected="false" aria-controls="carbontxt-http-panel" id="carbontxt-http-tab" class="tab inline-block p-4 border rounded-tr-lg bg-neutral-200 hover:bg-neutral-100 w-full m-0 no-underline hover:underline">Use existing with HTTP</a>
      </li>
  </ul>
  <div role="tabpanel" id="carbontxt-file-panel" aria-labelledby="carbontxt-file-tab" class="panel border-l border-r border-b p-5 border-t-none">
    <p class="m-0">Use the <a href="https://carbontxt.org/tools/builder" target="_blank">carbon.txt builder tool</a> (opens in new tab) to create a carbon.txt file and â€¨upload
it to your site, so it is accessible at <strong>https://{{preview_data.0.domain}}/carbon.txt</strong></p>
  </div>
  <div role="tabpanel" id="carbontxt-dns-panel" aria-labelledby="carbontxt-dns-tab" class="panel border-l border-r border-b p-5 border-t-none hidden">
    <p>Please create a DNS TXT record against your domain {{preview_data.0.domain}} containing the following content. This allows your domain to delegate its carbon.txt record to your primary domain, {{provider.primary_linked_domain.domain}}.</p>
    <div class="copyable bg-neutral-200 flex justify-between px-4 py-2 w-full">
      <code>carbon-txt-location={{provider.primary_linked_domain.domain}}</code>
      <a href="#" class="copy no-underline">ðŸ“‹</a>
    </div>
  </div>
  <div role="tabpanel" id="carbontxt-http-panel" aria-labelledby="carbontxt-http-tab" class="panel border-l border-r border-b p-5 border-t-none hidden">
    <p>Please configure your web server serving requests to {{preview_data.0.domain}} to return the following additional CarbonTxt-Location header. This allows your domain to delegate its carbon.txt record to your primary domain, {{provider.primary_linked_domain.domain}}.</p>
    <div class="copyable bg-neutral-200 flex justify-between px-4 py-2 w-full">
      <code>CarbonTxt-Location: {{provider.primary_linked_domain.domain}}</code>
      <a href="#" class="copy no-underline">ðŸ“‹</a>
    </div>
  </div>
</div>
{% else %}
    <h4>Create and upload a Carbon.txt file for your primary domain</h4>
    <p class="m-0">Follow the steps in the <a href="https://carbontxt.org/quickstart" target="_blank">Carbon.txt Quickstart</a> (opens in new tab) to create a Carbon.txt file for your organisation. You should ensure that the file you create is uploaded to <strong>https://{{preview_data.0.domain}}/carbon.txt</strong>.</p>
    <a href="https://carbontxt.org/quickstart" class="btn btn-white text-xs w-full mt-8" target="_blank">Create and upload a Carbon.txt file.</a>
{% endif %}
{%  endblock current_step_pre %}
{% block submit_button_text %}
  Verify link and finish
{% endblock submit_button_text %}
